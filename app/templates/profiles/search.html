<h1>Search</h1>
{% macro render_field(field, placeholder=None) %}
{% if field.errors %}
<div>
    {% elif field.flags.error %}
    <div>
        {% else %}
        <div>
            {% endif %}
            {% set css_class = 'form-control ' + kwargs.pop('class', '') %}
            {{ field(class=css_class, placeholder=placeholder, **kwargs) }}
        </div>
        {% endmacro %}

        <div>
            <div>
                <legend>Search</legend>
                {% with errors = get_flashed_messages(category_filter=["error"]) %}
                {% if errors %}
                <div>
                    {% for error in errors %}
                        {{ error }}<br>
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}

                {% if form.errors %}
                <div>
                    {% for field, error in form.errors.items() %}
                        {% for e in error %}
                            {{ e }}<br>
                        {% endfor %}
                    {% endfor %}
                </div>
                {% endif %}
                <form method="POST" accept-charset="UTF-8">
                    {{ form.csrf_token }}
                    {{ render_field(form.username, placeholder="Username Search", autofocus="") }}
                    <button type="submit" value="search">Search</button>
                </form>
                <div>
                    <ul>
                        {% for profile in results %}
                            <li>
                                <img style="width: 50px; height:50px" src={{profile.ppd}} /> 
                                {{ profile.username }}, {{ profile.status }} 
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                
                <a href="/">
                    <button>Home</button>
                </a>
            </div>
        </div>
    </div>
</div>